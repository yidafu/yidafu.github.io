{"componentChunkName":"component---src-templates-blog-post-js","path":"/separation-in-thousandth/","result":{"data":{"site":{"siteMetadata":{"title":"付达意的博客"}},"markdownRemark":{"id":"f72d304f-0e8c-54c1-a2b1-f4968abecfb3","excerpt":"问题描述 给定第一个数字将其转换成千分位分隔的形式。如: => 。 思路 解题的基本思路很简单： 思路一 找出给定数字开头（数字长度）不能被整除的高位。比如上面例子的。又比如，开头的 对于剩下的部分按每三个数字一组分组 最后在将1、…","html":"<h2>问题描述</h2>\n<p>给定第一个数字将其转换成千分位分隔的形式。如:<code class=\"language-text\">1234567890</code> => <code class=\"language-text\">1,234,567,890</code>。</p>\n<h2>思路</h2>\n<p>解题的基本思路很简单：</p>\n<h3>思路一</h3>\n<ol>\n<li>找出给定数字开头（数字长度）不能被<code class=\"language-text\">3</code>整除的高位。比如上面例子的<code class=\"language-text\">1</code>。又比如，<code class=\"language-text\">12345</code>开头的<code class=\"language-text\">12</code></li>\n</ol>\n<ul>\n<li>对于剩下的部分按每三个数字一组分组</li>\n<li>最后在将1、2步得到的分组用<code class=\"language-text\">,</code>连接起来</li>\n</ul>\n<h3>思路二</h3>\n<p>显然的我们意识到如果<strong>正向</strong>地去遍历数字字符串，需要去判断字符串长度是否能被<code class=\"language-text\">3</code>整除。那<strong>反向</strong>遍历呢？是的，如果这样做就不用判断<em>字符串长度是否能被<code class=\"language-text\">3</code>整除</em>。</p>\n<ul>\n<li>反向遍历字符串，以3个数字为一组</li>\n<li>将得到的分组用<code class=\"language-text\">,</code>连接起来</li>\n</ul>\n<h2>思路一—遍历求解</h2>\n<p>按照上面的思路实现的代码。没有什么值得解释的点。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>money <span class=\"token operator\">===</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 多出的最高位</span>\n  <span class=\"token keyword\">const</span> len <span class=\"token operator\">=</span> money<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> extra <span class=\"token operator\">=</span> len <span class=\"token operator\">%</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> strBuffer <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// array 拼接字符串效率更高</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> extra <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 非整齐最高位</span>\n    strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span> money<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> extra <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> extra<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i <span class=\"token operator\">+=</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span> money<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span> i<span class=\"token punctuation\">,</span> i <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// strBuffer should be [1, 293, 213]</span>\n  <span class=\"token keyword\">return</span> strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>思路一—借助正则</h2>\n<p>实现<code class=\"language-text\">for</code>遍历能够解决问题，但还有更骚气的写法吗？有，使用正则。不过稍稍有些特殊，将使用到<code class=\"language-text\">regexpInstance.lastIndex</code>属性。参见：<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex\">mdn: RegExp/lastIndex</a>。</p>\n<p>代码上面的类似，关键部分不同。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ...</span>\n<span class=\"token keyword\">const</span> regexp <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\d{3}</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span>\n\nregexp<span class=\"token punctuation\">.</span>lastIndex <span class=\"token operator\">=</span> extra<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> matchStr<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span> matchStr <span class=\"token operator\">=</span> regexp<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span> numStr <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span> matchStr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">return</span> strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span> <span class=\"token string\">','</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ..</span></code></pre></div>\n<p>这里借助了正则表达式的一个特性：</p>\n<p>每次匹配总是从<code class=\"language-text\">lastIndex</code>指定的索引开始匹配。可以借此来跳过多出来的最高位，使得与<code class=\"language-text\">/\\d{3}/g</code>匹配的子串长度始终是<code class=\"language-text\">3</code>的倍数。</p>\n<blockquote>\n<p>lastIndex is set to the next position following the most recent match.</p>\n</blockquote>\n<p>每次匹配成功以后，<code class=\"language-text\">lastIndex</code>将被设置为匹配成功的字符串的下一个索引。在循环里，每次匹配<code class=\"language-text\">3</code>个数字，直到匹配完成。</p>\n<h2>思路二—反向遍历</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">money</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>money <span class=\"token operator\">===</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token keyword\">const</span> strBuffer <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// array 拼接字符串效率更高</span>\n\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> money<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">-=</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span> money<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span> i <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">return</span> strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Oh wooo! 是不是非常简洁。</p>\n<p>这里还有个小知识点。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span> money<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span> i <span class=\"token operator\">-</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>这里并没有去判断<code class=\"language-text\">i - 3</code>是否小于<code class=\"language-text\">0</code>。实际上存在<code class=\"language-text\">i - 3 &lt; 0</code>的情况。</p>\n<blockquote>\n<p>Any argument value that is less than 0 or greater than stringName.length is treated as if it were 0 and stringName.length respectively. Any argument value that is NaN is treated as if it were 0.</p>\n</blockquote>\n<p><code class=\"language-text\">String.substring()</code>函数的<strong>所有负数参数将被当成 0 对待</strong>，大于字符串长度的参数将变为字符串长度。<code class=\"language-text\">NaN</code>也会被当成<code class=\"language-text\">0</code>对待。</p>\n<p>这个行为和<code class=\"language-text\">String.substr()</code>不同。第一个参数为负数，即表示倒数的索引。第二个参数为负数将被当成<code class=\"language-text\">0</code>对待。如果使用得是<code class=\"language-text\">String.substr()</code>就需要多去判断<code class=\"language-text\">i - 3</code>是否小于 <code class=\"language-text\">0</code>，并特殊处理。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> start<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> length <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> money<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">-=</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span> start <span class=\"token operator\">=</span> i <span class=\"token operator\">-</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    start <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    length <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  strBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span> money<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span> start<span class=\"token punctuation\">,</span> length <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>思路二—正则解法</h2>\n<p>这是所有解法里面代码最少，但也是需要最多正则知识的解法。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">money</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> money<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=(\\B\\d{3})+$)</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// return money.replace(/\\d{1,3}(?=(\\d{3})+$)/g, '$&amp;,');</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>正则表达式<code class=\"language-text\">/(?=(\\B\\d{3})+$)/g</code>的基本想法就是: 找到每隔 3 个数字的逗号插入位置。</p>\n<p>以<code class=\"language-text\">1234567890</code>为例，先找到插入位置。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4476f4c668294a745d7d5d5ca1322bd7/c6d67/001.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.51898734177215%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAnklEQVQY021Q0QqDMAz0/39Qh426dgqCsCebNNbeaLEDxw5C7gK5HGlSSsgIIYCZse976d57CDPY+6LrzF+68rxXPXJvqljXFS/n8GhbPK3FQARDhHGaYIwp5ZwDjSP6vgcRoes6zPOMGOOPYUrQ84QMA3jbIKqQ44AsC9haSIwlbchJjYGEABEppar3hJUUXJe+UM2/uM/eb/xD9fgAh1o1YOY8GjgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"001\"\n        title=\"001\"\n        src=\"/static/4476f4c668294a745d7d5d5ca1322bd7/f058b/001.png\"\n        srcset=\"/static/4476f4c668294a745d7d5d5ca1322bd7/c26ae/001.png 158w,\n/static/4476f4c668294a745d7d5d5ca1322bd7/6bdcf/001.png 315w,\n/static/4476f4c668294a745d7d5d5ca1322bd7/f058b/001.png 630w,\n/static/4476f4c668294a745d7d5d5ca1322bd7/c6d67/001.png 734w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>再在上图所指的位置插入<code class=\"language-text\">,</code>即可。</p>\n<!-- 具体做法：使用`(\\d{3})+$`，先找到以 3 的倍数的尾串。\n\n如：\n\n```js\n'1234567'.match(/(\\d{3})+$/g);\n// [\"234567\"]\n``` -->\n<p>具体解释参考<a href=\"https://juejin.im/post/5abb5b01f265da237f1e5a92\">这里</a>.</p>\n<h2>数组反序解法</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 真一行解法 (^_^)</span>\n<span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">money</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> money<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(\\d{3})</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>Boolean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">substr</span> <span class=\"token operator\">=></span> substr<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>格式化一下：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">money</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> money<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 字符串倒序</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(\\d{3})</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 分隔成 3个数字一组</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>Boolean<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 过滤空串</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">// 分组字符串正序</span>\n      <span class=\"token parameter\">substr</span> <span class=\"token operator\">=></span> substr<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 分组正序</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>还是<code class=\"language-text\">1234567890</code>为例：</p>\n<p>首先，<code class=\"language-text\">split('').reverse().join('')</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a23cd4d09dc98e3087d398e42666481a/83b75/002.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.810126582278485%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwElEQVQoz52R6QrDMAyD8/5P2fu+aaG3xpeR0XX7swWEbcVRIsec5ym3yMdx1DRNH7jy5N/6juOQQYii73tVVaU0TRXHsUUURRZhGNqaGASBsiyzvO/7liOCZVlktm1TWZZqmkbDMFjhruve0LbtKwL67jxx33cZVOu61tX6r+t61qDK6/I8V5Ik8jzP2gLkWGUMWMImNXsud/ucnef5OUNEnT2EGQEgZ65cWBSF5aiB64HHIT3rusrcrfJT/wLLD1qpGSVirdmiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"002\"\n        title=\"002\"\n        src=\"/static/a23cd4d09dc98e3087d398e42666481a/f058b/002.png\"\n        srcset=\"/static/a23cd4d09dc98e3087d398e42666481a/c26ae/002.png 158w,\n/static/a23cd4d09dc98e3087d398e42666481a/6bdcf/002.png 315w,\n/static/a23cd4d09dc98e3087d398e42666481a/f058b/002.png 630w,\n/static/a23cd4d09dc98e3087d398e42666481a/83b75/002.png 695w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>3 个数字一组<code class=\"language-text\">.split(/(\\d{3})/g).filter(Boolean)</code></p>\n<p>在这里使用正则会切割出空串，可以通过<code class=\"language-text\">filter(Boolean)</code>将其过滤。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6bf03ff2801e670c9a181633609a3ca9/1f083/003.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.88607594936709%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeElEQVQY061PSQoAIQzz/890X9GjC9ohBYd5wBRiaJIGFOccmnPSGOPFWovRe389MDQw9G/2MkbsvUlKSVprZqUUGWMo50zWWt7B8EspnAkhcAYaGDqALi703jOcc4wYI9VaKaXEZSiADw079HuDbGuNgd8KPH/OAxuCM+cFuVXIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"003\"\n        title=\"003\"\n        src=\"/static/6bf03ff2801e670c9a181633609a3ca9/f058b/003.png\"\n        srcset=\"/static/6bf03ff2801e670c9a181633609a3ca9/c26ae/003.png 158w,\n/static/6bf03ff2801e670c9a181633609a3ca9/6bdcf/003.png 315w,\n/static/6bf03ff2801e670c9a181633609a3ca9/f058b/003.png 630w,\n/static/6bf03ff2801e670c9a181633609a3ca9/1f083/003.png 660w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>把每个分组里的数字正序</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">// 分组字符串正序</span>\n  <span class=\"token parameter\">substr</span> <span class=\"token operator\">=></span> substr<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ddc132a7a9733ae52de476a0a1ba6496/6029f/004.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.51898734177215%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAp0lEQVQY0z1Q2a6FIBDz/7/SFRQ07oJctSdtwn1ohimlM6UAgL+UsK4rlmXBtm0IIeD7Ppznqf44DtX3fRFjlJb9vu+471scz3xTxBDgnYO1Fm3bou97GY/jiGEY4JwTMk+dMUZ1miZV6rz3GlhwgjUGVVWhLEuZzvMsQdM06rMJDeu6Fk/QqOu6/0VkyMjP88iEYJzrukgrav4GgpG4QNYRKSVx+f4H1UowiHYpa8oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"004\"\n        title=\"004\"\n        src=\"/static/ddc132a7a9733ae52de476a0a1ba6496/f058b/004.png\"\n        srcset=\"/static/ddc132a7a9733ae52de476a0a1ba6496/c26ae/004.png 158w,\n/static/ddc132a7a9733ae52de476a0a1ba6496/6bdcf/004.png 315w,\n/static/ddc132a7a9733ae52de476a0a1ba6496/f058b/004.png 630w,\n/static/ddc132a7a9733ae52de476a0a1ba6496/6029f/004.png 906w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>最后再正序</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6844a8820d9c0b4e39976563b870b3a0/5e3a3/005.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyklEQVQoz62R2YqFQAxE+///UBC5iKjXfUFxr+EEAjLM4whluiqxU4lB//yE4zg0z7Oh73sNw2BxHEcty2LcMU2T1nW1HEDzb8F5ngpN01iiqipFUaQkSQyfz0d1Xds5jmOlaaqiKNS2reXg5LIsU57nhm3bFLqu033fZhe313VZpzdc80jdX7nneRTo+P1+hVNcMi4cN3AiE7jmLoE7A2VZat93BV6+O4rYDaMCmnAR+/GG6L5T+FvHeXj/IR8d6wBOfGuu/9a87gcmghrqwlk8pwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"005\"\n        title=\"005\"\n        src=\"/static/6844a8820d9c0b4e39976563b870b3a0/f058b/005.png\"\n        srcset=\"/static/6844a8820d9c0b4e39976563b870b3a0/c26ae/005.png 158w,\n/static/6844a8820d9c0b4e39976563b870b3a0/6bdcf/005.png 315w,\n/static/6844a8820d9c0b4e39976563b870b3a0/f058b/005.png 630w,\n/static/6844a8820d9c0b4e39976563b870b3a0/5e3a3/005.png 763w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>总结</h2>\n<p>推荐反向遍历的解法。相比其他花里胡哨的解法，效率更高，更容易理解。</p>\n<!-- 解决问题的方法并不唯一 -->\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substring#Description\">String/substring#Description</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substr#Description\">String/substr#Description</a></p>\n<p><a href=\"https://juejin.im/post/5abb5b01f265da237f1e5a92\">TONGZl: 把一串数字表示成千位分隔形式——JS正则表达式的应用</a></p>","frontmatter":{"title":"数字表示成千位分隔形式的几种解法","date":"March 23, 2019","description":null}},"previous":{"fields":{"slug":"/in-order-non-recursive-traversal-of-binary-trees/"},"frontmatter":{"title":"二叉树的中序非递归遍历"}},"next":null},"pageContext":{"id":"f72d304f-0e8c-54c1-a2b1-f4968abecfb3","previousPostId":"a27735f4-c9fd-5cd5-9735-a34206c12336","nextPostId":null}},"staticQueryHashes":["230163734","3589320610"]}
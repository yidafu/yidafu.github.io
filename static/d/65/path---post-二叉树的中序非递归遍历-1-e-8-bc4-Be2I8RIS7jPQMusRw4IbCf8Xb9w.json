{"data":{"markdownRemark":{"html":"<h1>前话</h1>\n<p>写孩子-兄弟法表示森林，遇到了用非递归实现中序遍历。先没有参考教材上给的伪 C 算法，而是自己独立实现了另一种算法，相比教材的算法，代码量多了一些，操作略微复杂了一点。不管怎么说还是自己独立做出来的。</p>\n<p>实质上，森林的后根遍历就是二叉树的中序遍历。</p>\n<h1>来，上代码</h1>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-c line-numbers\"><code class=\"language-c\"><span class=\"token keyword\">void</span> Tree<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">_postorderStackTraverse</span><span class=\"token punctuation\">(</span>Node<span class=\"token operator\">*</span> <span class=\"token operator\">&amp;</span>TNode<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span> visit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span> ElemType e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    stack<span class=\"token operator\">&lt;</span>Node <span class=\"token operator\">*</span><span class=\"token operator\">></span> Traverse<span class=\"token punctuation\">;</span>\n    Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span> TNode <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span> true <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 入栈操作</span>\n        Node <span class=\"token operator\">*</span>topOne <span class=\"token operator\">=</span> Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>topOne<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            topOne <span class=\"token operator\">=</span> Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">visit</span><span class=\"token punctuation\">(</span>topOne<span class=\"token operator\">-></span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>topOne<span class=\"token operator\">-></span>nextSibling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>topOne<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Traverse<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>topOne<span class=\"token operator\">-></span>childNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>解释</h1>\n<p>我的基本思路就是利用栈，森林后根遍历的特点：<strong>孩子应该被先访问，根再被访问，兄弟最后被访问</strong>。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0b961ef88c4a0b2ad3500fe04bd3f7f5/117ae/binary-tree-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 263px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 132.31939163498097%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsSAAALEgHS3X78AAABdElEQVQ4y8WU626CQBCFfXCfiR8EXsGEREPQKA3eQEXlUtQYiDdov0BobBG2tU16fmyGZc+eMzO723r7BVp/Q77dbpvNhiDLsvsV1+s1CAIBmUXz+bxKPp/Pi8VCTHYc5yF5uVxW5x+T0zTNSvB5Op0K8pPKq9WKiqzX6y9/P5Ft2z4cDmEYvpaIosjzPGhxHMuyXEsG3W7XdV3IQQ7f9yFPJpN+v4++oihN5E6ngwIBasUuxOzCppfLRUBmEc7pNskTMLKLaZpi5SJn8oTgl0CWhHGRJImqqk3KvV6PrnglttstZMuyBoPBz3LGBdUiRv+7OdNS1PBJgGH44/FYrMwxoCuYHI1GVo6XHFSLyolz1jSNQ4LD/X6/2+2OxyNHleLrui62/ZEz12g2m02nU2K6TTr0oonMrGEYEJwc8KkZ43A4xDybSpLU1Oe6W4U4RtrttuCQ1N0qRnw1VZtFVTKlKp4nwQNYfSvu55tekv97ep/AO3S72mBEtuRHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"binary tree 5\"\n        title=\"\"\n        src=\"/static/0b961ef88c4a0b2ad3500fe04bd3f7f5/117ae/binary-tree-5.png\"\n        srcset=\"/static/0b961ef88c4a0b2ad3500fe04bd3f7f5/1fc5d/binary-tree-5.png 163w,\n/static/0b961ef88c4a0b2ad3500fe04bd3f7f5/117ae/binary-tree-5.png 263w\"\n        sizes=\"(max-width: 263px) 100vw, 263px\"\n      />\n  </span>\n  </a></p>\n<p>只要将树的节点按照上面的思路放入栈即可。初始时，栈中有一个根元素（先假设有孩子节点和兄弟节点），将根节点取出，依次放入兄弟节点（在栈底最后被访问），根节点，孩子节点（在栈顶最先被访问）。放好以后进入下一个循环，原来的孩子节点成了根节点，重复之前的步骤。\n<a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9e66ffcaf4f5bf57e12551bb1921bf9f/cd7d6/binary-tree-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 64.03269754768392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAA1klEQVQoz62RyQ6DMAxE+f+/RGLftwSxtk/MoaWlFaj1IYztjGdMnNsP4eizrus8zwBO8DUynK7rAJya8jfyNE3GGFrjOF4gi1YURZqmSZI0TfO81Ddy3/ek8KlYa+u6Bi/LckCmDeAUGUHwMAxRFAHMFgDf9ynuyCwThiHtIAhQaNsWWUSwimdSCWKbWVTo7sie5+V57rpuVVUqQijLMssyhmpVONLH/4Osp1Yo5QZeZJih/DDdOfjb72+DPWRZQRvFcUx6iswlHCKrh7VbvDzyR/LJuAOc8PxceYZ20wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"binary tree 1\"\n        title=\"\"\n        src=\"/static/9e66ffcaf4f5bf57e12551bb1921bf9f/10273/binary-tree-1.png\"\n        srcset=\"/static/9e66ffcaf4f5bf57e12551bb1921bf9f/9b14a/binary-tree-1.png 163w,\n/static/9e66ffcaf4f5bf57e12551bb1921bf9f/94962/binary-tree-1.png 325w,\n/static/9e66ffcaf4f5bf57e12551bb1921bf9f/10273/binary-tree-1.png 650w,\n/static/9e66ffcaf4f5bf57e12551bb1921bf9f/cd7d6/binary-tree-1.png 734w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </span>\n  </a></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c8edfd2978c3cbe614855d5d5f1ced8b/3e276/binary-tree-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.153175591531756%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyUlEQVQoz6WS2Q6DIBBF+f8PJXEBV1wQbU8cQ6htTRt5IDMyZ+ZeUD1uLJUmy7J47wnGcfwbnudZsL7v30tDCHRf1/UrPE3TRxgyz/OiKNKjn+Bt27BjrQUehoH0gJFh99W2LRUCO+dSGKZpGmmNryzLEHLAxhjgqqrY67qmN3Gc2XVdWZYcyUC6aK1Jz7LpynxggHj/qKAUhpgvfl+oeIGjk5hSLTPFMBdGkJapi2dEBQOxQBfsiHOBZb+CZbjcjTzySZ2683s+AcSPwu0nr6XgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"binary tree 2\"\n        title=\"\"\n        src=\"/static/c8edfd2978c3cbe614855d5d5f1ced8b/10273/binary-tree-2.png\"\n        srcset=\"/static/c8edfd2978c3cbe614855d5d5f1ced8b/9b14a/binary-tree-2.png 163w,\n/static/c8edfd2978c3cbe614855d5d5f1ced8b/94962/binary-tree-2.png 325w,\n/static/c8edfd2978c3cbe614855d5d5f1ced8b/10273/binary-tree-2.png 650w,\n/static/c8edfd2978c3cbe614855d5d5f1ced8b/3e276/binary-tree-2.png 803w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </span>\n  </a></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8fa471518744efea5cef6426ea4b5218/8f4fa/binary-tree-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.03966005665722%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAA80lEQVQoz42S2w5EQBBE/f8HehV3EXfDsFh7Mr2xNkaiHmg9XVPV3ZzdYF3XeZ4JXgb7P94G+wWOvCAMw0AwTdM4jvszfMnLsvR9j75SCv65Qo6A1tpO5iDPc5zzTJJk2zZpBDtVVTVN07Yt95K3kKmDQ1Ecx1EUdV2XZVld1zICgjRNEcCFnRwEARWe58FHgQlh1XXdsiwnA8hhGKJvsQ2HA2R930cNF9IqshihgAwx/o/mfwOTLE9KydBtURT0wqe0yhaUwWHese4AQWhUcx1qMsLbVZ0BAU1xyyzomRXg+cq3kCmSCdE5sTa4/na3th/iA3nAvN78hMVbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"binary tree 4\"\n        title=\"\"\n        src=\"/static/8fa471518744efea5cef6426ea4b5218/10273/binary-tree-4.png\"\n        srcset=\"/static/8fa471518744efea5cef6426ea4b5218/9b14a/binary-tree-4.png 163w,\n/static/8fa471518744efea5cef6426ea4b5218/94962/binary-tree-4.png 325w,\n/static/8fa471518744efea5cef6426ea4b5218/10273/binary-tree-4.png 650w,\n/static/8fa471518744efea5cef6426ea4b5218/8f4fa/binary-tree-4.png 706w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </span>\n  </a></p>\n<p>这样已经做到了把二叉树放入栈中，还有一种很重要的问题就是：根节点没有兄弟和孩子节点的情况，这就时候应该退栈了。</p>\n<p>回到之前的放入的步骤，假设根节点的兄弟节点，孩子节点都是<code class=\"language-text\">NULL</code>，我们依旧全部放入栈中，但是，这里就需要在取出栈顶元素的同时，判断取出的元素是否为空，非空就说明当前分支没有走到尽头，就放入其兄弟节点，自己本身，其孩子节点，为空就说明走到了尽头，没有元素可以放入栈中，再次执行出栈操作取出栈中的下一个节点（当前的<code class=\"language-text\">NULL</code>节点的父亲节点），并且访问取出的节点，再依次放入取出的节点的兄弟节点，本身，孩子节点，结束一次循环。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/247d29b33f3fb995df69a3b8dc547b8e/7e911/binary-tree-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.115207373271886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3ElEQVQoz6WRSw6DMAxEc/9LsiRAIfxKCCVtnzwIwbYdicj22GNju88fcHzbtj0NMUbcnDPv23DmYb8M16BLKfV9/zA0TYPQsiwQyaAy3nVdy7KsquoadDTEgkMCfzYoW3kSYqgQwjRNGPu+H51x6IZkURTDMEDQH0VsFTMILJFsQAJXv+bgsOgzjqNC0CjiEtQsDKUBScBGV9RRTDYhaJLquqaeF4o52QVvMFy3dRSzQwiSKECIVNoSoUnXdW3b6l+89zrHbdt0I4+a8yoyEGIdOo/upP+63flnfAFONEgFmRQTuwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"binary tree 3\"\n        title=\"\"\n        src=\"/static/247d29b33f3fb995df69a3b8dc547b8e/10273/binary-tree-3.png\"\n        srcset=\"/static/247d29b33f3fb995df69a3b8dc547b8e/9b14a/binary-tree-3.png 163w,\n/static/247d29b33f3fb995df69a3b8dc547b8e/94962/binary-tree-3.png 325w,\n/static/247d29b33f3fb995df69a3b8dc547b8e/10273/binary-tree-3.png 650w,\n/static/247d29b33f3fb995df69a3b8dc547b8e/7e911/binary-tree-3.png 868w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </span>\n  </a></p>\n<p>如此，便可以做到二叉树的中序遍历。需要注意的一点是：遇到<code class=\"language-text\">NULL</code>节点，再取下栈中一个节点时，要判断一下是否栈为空，为空就结束循环。</p>\n<h1>结语</h1>\n<p>拖了好久，终于补上了这个坑。</p>","frontmatter":{"title":"二叉树的中序非递归遍历"}}},"pageContext":{"slug":"/post/二叉树的中序非递归遍历","pre":"/post/双重指针和引用指针","next":"/post/如何理解递归","tags":["wabpack","eslint","javascript","axios","api","react","babel","linix","app","algorihm","git","gogs","nginx","proxy","ruby","language","php","shell","cpp","language-feature","c","recursion","java","jsp","mysql","atom","markdown","nodejs","error"]}}
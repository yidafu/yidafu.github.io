{"data":{"markdownRemark":{"html":"<h1>基于Gogs的自主git服务</h1>\n<p>gogs 的优点：安装简单，配置要求小。</p>\n<blockquote>\n<p>操作建议:查看最新的官方英文安装文档</p>\n</blockquote>\n<h2>新建一个<code>git</code>用户</h2>\n<pre><code class=\"language-shell\">sudo useradd git\n</code></pre>\n<p>如果你不想折腾，这一步就非常重要了。原因是后面需要选择一个用户作为<em>运行用户</em>，如果你不添加<code>git</code>用户的话，你就会选择<code>root</code>作为 Gogs 的运行用户（理所当然不是吗？）。然后，一切搞好断开 SSH 连接以后，你会发现<code>root</code>用户无法登录，如果你只有一个<code>root</code>用户的话，<strong>恭喜你系统重装了解一下</strong>，开玩笑啦( • ̀ω•́ )✧。别慌张，你只要重启一下服务器就可以解决，其主要目的是为了杀死正在运行的 Gogs 进程，你有另外的方法也可以。</p>\n<h2>获得发行包</h2>\n<p>进入 git 用户目录。</p>\n<pre><code class=\"language-shell\">cd /home/git\n</code></pre>\n<p>获得安装包。请到官网选择最新的发行版。</p>\n<pre><code class=\"language-shell\">wget https://dl.gogs.io/0.11.43/gogs_0.11.43_linux_amd64.tar.gz\n</code></pre>\n<p><img src=\"../imgs/gogs-download.png\"></p>\n<p>你也可以到官方的 github 仓库去获取最新版本。地址是这个：<a href=\"https://github.com/gogits/gogs/releases\">https://github.com/gogits/gogs/releases</a></p>\n<p><img src=\"../imgs/gogs-github-releases.png\"></p>\n<p>解压</p>\n<pre><code class=\"language-shell\">tar -zxvf gogs_0.11.43_linux_amd64.tar.gz\n</code></pre>\n<h2>安装</h2>\n<p>进入解压好的目录</p>\n<pre><code class=\"language-shell\">cd gogs_0.11.43_linux_amd64.tar.gz\n</code></pre>\n<pre><code class=\"language-shell\">./gogs web\n</code></pre>\n<p>访问<a href=\"http://your-ip:3000\">http://your-ip:3000</a>即可进入图形化安装界面。</p>\n<p>到这一步请务必确保<code>3000</code>端口是可以访问的。强烈建议先参考<a href=\"#port\">这里</a></p>\n<p><img src=\"../imgs/gogs-web-install.png\"></p>\n<p>这里我是虚拟机演示的，实际操作请使用你的 IP:3000 访问</p>\n<p>配置数据库：</p>\n<p>你需要输入的是你的数据库用户名和密码。注意：你的数据库需要自己手动创建, Gogs 不会替你创建数据库，建议数据名为<code>gogs</code></p>\n<p><img src=\"../imgs/gogs-install-db.png\"></p>\n<p>应用配置：</p>\n<p>到这一步特别重要的是运行用户的设置，域名的设置。</p>\n<p><strong>记住：将谁设为运行用户以后就不能通过 SSH 登录了，如果你只有一个<code>root</code>用户请务必先添加一个<code>git</code>用户</strong>这是 Gogs 处于安全性考虑而设计的。如果出现了<code>root</code>用户登录失败，也是有方法的，参见 <a href=\"#sheet\">Trouble Sheet</a>。</p>\n<p>至于为什么要将域名设置好？这关系着你使用<code>git clone url</code>时，URL 是否美观，如果你不介意通过使用这样的命令：<code>git clone git@127.0.0.1:3000/usr-name/repo</code>这样丑陋的命令，这两个使用默认就可以了选项默认。如果你想要通过域名访问的话，就需要配置 Nginx 反向代理，相关内容参考<a href=\"#nginx\">这里</a></p>\n<p><img src=\"../imgs/gogs-install-application-setting.png\"></p>\n<p>最后点击安装。</p>\n<p><img src=\"../imgs/gogs-install-begin.png\"></p>\n<p>一切顺利的你就可以安装好了你的 git 自助服务。</p>\n<p>访问<a href=\"http://your-ip:3000\">http://your-ip:3000</a></p>\n<p><img src=\"../imgs/gogs-finish.png\"></p>\n<p>恭喜你！安装结束！</p>\n<p>是不是很方便？赶快去享受你的自建 git。</p>\n<blockquote>\n<p>第一个注册的用户默认为管理员</p>\n</blockquote>\n<h2>Trouble Sheet</h2>\n<h3>如何后台运行</h3>\n<p>方法很多,我使用的<code>screen</code>。</p>\n<pre><code class=\"language-shell\">cd gogs/\n\nscreen -S gogs\n\n./gogs web\n</code></pre>\n<p>关闭 SSH 链接，依旧运行。</p>\n<h3><span id=\"port\" >云服务器开放端口</span></h3>\n<ul>\n<li><a href=\"https://help.aliyun.com/document_detail/25471.html\">https://help.aliyun.com/document_detail/25471.html</a></li>\n</ul>\n<h3><span id=\"nginx\">Nginx 反向代理</span></h3>\n<ul>\n<li><a href=\"../PHP/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86.md\">Nginx 反向代理</a></li>\n</ul>\n<h3>不小心用root权限install,现在root无法远程登录ssh怎么破?</h3>\n<p><a href=\"https://github.com/gogits/gogs/issues/349\">Run as root and cannot login with SSH</a></p>","frontmatter":{"title":"基于gogs的自主git服务"}}},"pageContext":{"slug":"/post/基于gogs的自主git服务","pre":"/post/software-must-install","next":"/post/why-dont-choice-ruby","tags":["wabpack","eslint","javascript","axios","api","react","babel","algorihm","linix","app","git","gogs","ruby","language","nginx","proxy","php","shell","cpp","language-feature","c","recursion","java","jsp","mysql","atom","markdown","nodejs","error"]}}